<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Parallel Ages & Albums</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 1em;
      background: #fff;
      color: #222;
    }
    .result {
      font-size: 1.2em;
      line-height: 1.5;
    }
    .norah, .cameron {
      font-weight: bold;
      padding-right: 0.3em;
      letter-spacing: 0.5px;
    }
    .norah { color: #d63384; }
    .cameron { color: #2a6fdb; }
    .album-group {
      margin-top: 1.5em;
    }
    .album-group h3 {
      margin-bottom: 0.5em;
      color: #444;
    }
    .links {
      display: flex;
      flex-direction: column;
      gap: 0.4em;
    }
    a {
      color: #2a6fdb;
      text-decoration: none;
      font-size: 1em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="result" id="result"></div>
  <div id="album-links"></div>

  <script>
    const cameronBirth = new Date("2022-03-18");
    const norahBirth = new Date("2024-01-19");

    // Album base links
    const aaronsAlbum = "https://photos.google.com/search/CgdDYW1lcm9uIjESLwotCisKKRInQUYxUWlwUFh6VlZVOHJDRTdKR2tJSkpNVlktSXFrYXUyNmI5bjZnKOyhiNijMw%3D%3D";
    const kristinsAlbum = "https://photos.google.com/search/CgdDYW1lcm9uIjESLwotCisKKRInQUYxUWlwTXBEUkJwWGVVMUpzWHJfMHZtRFZCN3RPc2Z4T1U4ZmFZKOeE3dejMw%3D%3D";

    function calculateAgeYrMo(birth, today) {
      let years = today.getFullYear() - birth.getFullYear();
      let months = today.getMonth() - birth.getMonth();
      if (today.getDate() < birth.getDate()) months -= 1;
      if (months < 0) { years -= 1; months += 12; }
      return { years, months };
    }

    function formatDate(d) {
      const opts = { year: 'numeric', month: 'short', day: 'numeric' };
      return d.toLocaleDateString(undefined, opts);
    }

    function monthLinkFor(date, baseLink) {
      const monthNames = ["Jan","Feb","Mar","Apr","May","Jun",
                          "Jul","Aug","Sep","Oct","Nov","Dec"];
      return {
        label: `${monthNames[date.getMonth()]} ${date.getFullYear()}`,
        url: `${baseLink}%20${monthNames[date.getMonth()]}%20${date.getFullYear()}`
      };
    }

    function dayLinkFor(date, baseLink) {
      const monthNames = ["Jan","Feb","Mar","Apr","May","Jun",
                          "Jul","Aug","Sep","Oct","Nov","Dec"];
      return {
        label: formatDate(date),
        url: `${baseLink}%20${monthNames[date.getMonth()]}%20${date.getDate()}%20${date.getFullYear()}`
      };
    }

    function buildLinks(baseLink, parallelDate) {
      const weekBefore = new Date(parallelDate);
      weekBefore.setDate(parallelDate.getDate() - 7);
      const weekAfter = new Date(parallelDate);
      weekAfter.setDate(parallelDate.getDate() + 7);

      const links = [monthLinkFor(parallelDate, baseLink)];
      if (weekBefore.getMonth() !== parallelDate.getMonth() || weekBefore.getFullYear() !== parallelDate.getFullYear()) {
        links.push(monthLinkFor(weekBefore, baseLink));
      }
      if (weekAfter.getMonth() !== parallelDate.getMonth() || weekAfter.getFullYear() !== parallelDate.getFullYear()) {
        links.push(monthLinkFor(weekAfter, baseLink));
      }

      const exactDay = dayLinkFor(parallelDate, baseLink);

      return `
        <div class="links">
          <a href="${exactDay.url}" target="_blank">ðŸ“¸ ${exactDay.label}</a>
          ${links.map(l => `<a href="${l.url}" target="_blank">ðŸ“… ${l.label}</a>`).join("")}
        </div>
      `;
    }

    function calculate() {
      const today = new Date();
      const ageDays = Math.floor((today - norahBirth) / (1000*60*60*24));
      const parallelDate = new Date(cameronBirth.getTime() + ageDays*24*60*60*1000);

      const age = calculateAgeYrMo(norahBirth, today);
      const ageStr = [
        age.years > 0 ? `${age.years}yr` : "",
        age.months > 0 ? `${age.months}mo` : ""
      ].filter(Boolean).join(" ");

      document.getElementById("result").innerHTML =
        `<div><span class="norah">Norah</span> is ${ageStr} old today.</div>
         <div><span class="cameron">Cameron</span> was this age around ${formatDate(parallelDate)}.</div>`;

      // Device detection
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const albumDiv = document.getElementById("album-links");

      if (/android/i.test(ua)) {
        albumDiv.innerHTML = `
          <div class="album-group">
            <h3>Aaron's Album</h3>
            ${buildLinks(aaronsAlbum, parallelDate)}
          </div>`;
      } else if (/iPhone|iPad|iPod/i.test(ua)) {
        albumDiv.innerHTML = `
          <div class="album-group">
            <h3>Kristin's Album</h3>
            ${buildLinks(kristinsAlbum, parallelDate)}
          </div>`;
      } else {
        albumDiv.innerHTML = `
          <div class="album-group">
            <h3>Aaron's Album</h3>
            ${buildLinks(aaronsAlbum, parallelDate)}
          </div>
          <div class="album-group">
            <h3>Kristin's Album</h3>
            ${buildLinks(kristinsAlbum, parallelDate)}
          </div>`;
      }
    }

    window.onload = calculate;
  </script>
</body>
</html>
