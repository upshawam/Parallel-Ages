<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Parallel Ages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 1em;
      background: #fff;
      color: #222;
    }
    .result {
      font-size: 1.25em;
      line-height: 1.6;
    }
    .norah { font-weight: bold; color: #d63384; }
    .cameron { font-weight: bold; color: #2a6fdb; }
    .links {
      margin-top: 1em;
      display: flex;
      flex-direction: column;
      gap: 0.5em;
    }
    a {
      color: #2a6fdb;
      text-decoration: none;
      font-size: 1.1em;
    }
    a:hover { text-decoration: underline; }
    @media (min-width: 600px) {
      .result { font-size: 1.1em; }
      a { font-size: 1em; }
    }
  </style>
</head>
<body>
  <div class="result" id="result"></div>

  <script>
    const cameronBirth = new Date("2022-03-18");
    const norahBirth = new Date("2024-01-19");

    const basePersonLink = "https://photos.google.com/search/CgdDYW1lcm9uIjESLwotCisKKRInQUYxUWlwUFh6VlZVOHJDRTdKR2tJSkpNVlktSXFrYXUyNmI5bjZnKMK8ydajMw%3D%3D";

    function calculateAgeYrMo(birth, today) {
      let years = today.getFullYear() - birth.getFullYear();
      let months = today.getMonth() - birth.getMonth();
      if (today.getDate() < birth.getDate()) months -= 1;
      if (months < 0) { years -= 1; months += 12; }
      return { years, months };
    }

    function formatDate(d) {
      const opts = { year: 'numeric', month: 'short', day: 'numeric' };
      return d.toLocaleDateString(undefined, opts);
    }

    function monthLinkFor(date) {
      const monthNames = ["January","February","March","April","May","June",
                          "July","August","September","October","November","December"];
      return {
        label: `${monthNames[date.getMonth()]} ${date.getFullYear()}`,
        url: `${basePersonLink}%20${monthNames[date.getMonth()]}%20${date.getFullYear()}`
      };
    }

    function dayLinkFor(date) {
      const monthNames = ["January","February","March","April","May","June",
                          "July","August","September","October","November","December"];
      return {
        label: formatDate(date),
        url: `${basePersonLink}%20${monthNames[date.getMonth()]}%20${date.getDate()}%20${date.getFullYear()}`
      };
    }

    function calculate() {
      const today = new Date();
      const ageDays = Math.floor((today - norahBirth) / (1000*60*60*24));
      const parallelDate = new Date(cameronBirth.getTime() + ageDays*24*60*60*1000);

      const age = calculateAgeYrMo(norahBirth, today);
      const ageStr = [
        age.years > 0 ? `${age.years}yr` : "",
        age.months > 0 ? `${age.months}mo` : ""
      ].filter(Boolean).join(" ");

      const weekBefore = new Date(parallelDate);
      weekBefore.setDate(parallelDate.getDate() - 7);
      const weekAfter = new Date(parallelDate);
      weekAfter.setDate(parallelDate.getDate() + 7);

      // Always include the parallel date's month
      const links = [monthLinkFor(parallelDate)];

      // Add previous month if range crosses back
      if (weekBefore.getMonth() !== parallelDate.getMonth() || weekBefore.getFullYear() !== parallelDate.getFullYear()) {
        links.push(monthLinkFor(weekBefore));
      }

      // Add next month if range crosses forward
      if (weekAfter.getMonth() !== parallelDate.getMonth() || weekAfter.getFullYear() !== parallelDate.getFullYear()) {
        links.push(monthLinkFor(weekAfter));
      }

      // Add exact day link
      const exactDay = dayLinkFor(parallelDate);

      const linkHtml = [
        `<a href="${exactDay.url}" target="_blank">ðŸ“¸ Cameronâ€™s photos on ${exactDay.label}</a>`,
        ...links.map(l => `<a href="${l.url}" target="_blank">ðŸ“… Cameronâ€™s photos in ${l.label}</a>`)
      ].join("");

      document.getElementById("result").innerHTML =
        `<div><span class="norah">Norah</span> is ${ageStr} old today.</div>
         <div><span class="cameron">Cameron</span> was this age around ${formatDate(parallelDate)}.</div>
         <div>Browse Cameronâ€™s photos from <b>${formatDate(weekBefore)}</b> to <b>${formatDate(weekAfter)}</b>.</div>
         <div class="links">${linkHtml}</div>`;
    }

    window.onload = calculate;
  </script>
</body>
</html>
